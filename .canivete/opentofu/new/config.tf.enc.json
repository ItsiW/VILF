{
  "data": {
    "google_billing_account": {
      "main": {
        "display_name": "My Billing Account"
      }
    },
    "google_project_service": {
      "cloudresourcemanager": {
        "service": "cloudresourcemanager.googleapis.com"
      },
      "serviceusage": {
        "service": "serviceusage.googleapis.com"
      }
    }
  },
  "provider": {
    "github": {
      "owner": "ItsiW"
    },
    "google": {
      "project": "vilf-com",
      "region": "us-west1",
      "zone": "us-west1-b"
    }
  },
  "resource": {
    "google_billing_project_info": {
      "main": {
        "billing_account": "${ data.google_billing_account.main.id }"
      }
    },
    "google_certificate_manager_certificate_map": {
      "main": {
        "depends_on": [
          "google_project_service.certificatemanager"
        ],
        "name": "vilf-map"
      }
    },
    "google_compute_backend_bucket": {
      "main": {
        "bucket_name": "${ google_storage_bucket.main.name }",
        "compression_mode": "DISABLED",
        "custom_response_headers": [
          "Strict-Transport-Security:max-age=31536000; includeSubDomains; preload"
        ],
        "depends_on": [
          "google_project_service.compute"
        ],
        "enable_cdn": true,
        "name": "${ google_storage_bucket.main.name }"
      }
    },
    "google_compute_global_forwarding_rule": {
      "http": {
        "depends_on": [
          "google_project_service.compute"
        ],
        "name": "vilf-lb-http-frontend",
        "port_range": "80-80",
        "target": "${ google_compute_target_http_proxy.main.id }"
      },
      "https": {
        "depends_on": [
          "google_project_service.compute"
        ],
        "name": "vilf-lb-https-frontend",
        "port_range": "443-443",
        "target": "${ google_compute_target_https_proxy.main.id }"
      }
    },
    "google_compute_target_http_proxy": {
      "main": {
        "depends_on": [
          "google_project_service.compute"
        ],
        "name": "vilf-lb-http-proxy",
        "url_map": "${ google_compute_url_map.redirect.id }"
      }
    },
    "google_compute_target_https_proxy": {
      "main": {
        "certificate_map": "https://certificatemanager.googleapis.com/v1/${ google_certificate_manager_certificate_map.main.id }",
        "depends_on": [
          "google_project_service.compute"
        ],
        "name": "vilf-lb-https-proxy",
        "url_map": "${ google_compute_url_map.main.id }"
      }
    },
    "google_compute_url_map": {
      "main": {
        "default_service": "${ google_compute_backend_bucket.main.id }",
        "depends_on": [
          "google_project_service.compute"
        ],
        "name": "vilf-lb"
      },
      "redirect": {
        "default_url_redirect": {
          "https_redirect": true,
          "redirect_response_code": "MOVED_PERMANENTLY_DEFAULT",
          "strip_query": false
        },
        "depends_on": [
          "google_project_service.compute"
        ],
        "name": "vilf-redirect",
        "test": [
          {
            "description": "Test with no query parameters",
            "host": "vilf.org",
            "path": "/best/",
            "service": ""
          },
          {
            "description": "Test with query parameters",
            "host": "vilf.org",
            "path": "/best/?parameter1=value1&parameter2=value2",
            "service": ""
          }
        ]
      }
    },
    "google_project_service": {
      "certificatemanager": {
        "depends_on": [
          "google_billing_project_info.main",
          "data.google_project_service.serviceusage",
          "data.google_project_service.cloudresourcemanager"
        ],
        "service": "certificatemanager.googleapis.com"
      },
      "compute": {
        "depends_on": [
          "google_billing_project_info.main",
          "data.google_project_service.serviceusage",
          "data.google_project_service.cloudresourcemanager"
        ],
        "service": "compute.googleapis.com"
      },
      "sqladmin": {
        "depends_on": [
          "google_billing_project_info.main",
          "data.google_project_service.serviceusage",
          "data.google_project_service.cloudresourcemanager"
        ],
        "service": "sqladmin.googleapis.com"
      },
      "storage": {
        "depends_on": [
          "google_billing_project_info.main",
          "data.google_project_service.serviceusage",
          "data.google_project_service.cloudresourcemanager"
        ],
        "service": "storage.googleapis.com"
      }
    },
    "google_sql_database": {
      "appsmith": {
        "depends_on": [
          "google_project_service.sqladmin"
        ],
        "instance": "${ google_sql_database_instance.main.name }",
        "name": "appsmith"
      }
    },
    "google_sql_database_instance": {
      "main": {
        "database_version": "POSTGRES_15",
        "depends_on": [
          "google_project_service.sqladmin"
        ],
        "name": "vilf",
        "settings": {
          "deletion_protection_enabled": true,
          "ip_configuration": {
            "authorized_networks": [
              {
                "name": "appsmith-1",
                "value": "18.223.74.85"
              },
              {
                "name": "appsmith-2",
                "value": "3.131.104.27"
              }
            ]
          },
          "tier": "db-custom-2-8192"
        }
      }
    },
    "google_sql_user": {
      "appsmith": {
        "depends_on": [
          "google_project_service.sqladmin"
        ],
        "instance": "${ google_sql_database_instance.main.name }",
        "name": "appsmith",
        "password": "${ random_password.appsmith.result }"
      }
    },
    "google_storage_bucket": {
      "main": {
        "depends_on": [
          "google_project_service.storage"
        ],
        "location": "US",
        "name": "vilf-org"
      }
    },
    "random_password": {
      "appsmith": {
        "length": 21
      }
    }
  },
  "terraform": {
    "encryption": {
      "key_provider": {
        "pbkdf2": {
          "default": {
            "passphrase": "ref+sops://.canivete/sops/default.yaml#/opentofu_pw"
          }
        }
      },
      "method": {
        "aes_gcm": {
          "default": {
            "keys": "${ key_provider.pbkdf2.default }"
          }
        }
      },
      "plan": {
        "fallback": {
          "method": "${ method.aes_gcm.default }"
        },
        "method": "${ method.aes_gcm.default }"
      },
      "state": {
        "fallback": {
          "method": "${ method.aes_gcm.default }"
        },
        "method": "${ method.aes_gcm.default }"
      }
    },
    "required_providers": {
      "github": {
        "source": "integrations/github",
        "version": "6.2.1"
      },
      "google": {
        "source": "opentofu/google",
        "version": "5.23.0"
      },
      "random": {
        "source": "opentofu/random",
        "version": "3.6.0"
      }
    }
  }
}
